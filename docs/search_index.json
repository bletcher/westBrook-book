[["index.html", "The West Brook Story Chapter 1 Introduction", " The West Brook Story Ben Letcher 2022-03-11 Chapter 1 Introduction This book describes accessing, cleaning, and analyzing data from the West Brook Study in Whateley MA, USA. Use bookdown::render_book() to render the book (not showing up in the Build tab like the bookdown book (https://bookdown.org/yihui/bookdown/usage.html) says it should. Use bookdown::render_book(\"index.Rmd\", \"bookdown::gitbook\") to force html book. Use clean_book() to clean up temporary files. "],["getData.html", "Chapter 2 Get data from the server", " Chapter 2 Get data from the server The server hosting the data is named osensei and is at UMass (osensei.cns.umass.edu). It can be accessed using functions in the getWBData package. Use devtools::install_github('Conte-Ecology/westBrookData/getWBData') to install. Most of the functions will run reconnect() to connect to the server with your username and password. Run reconnect() from the console to connect if necessary. Use conDplyr to see the list of available tables on the server. Details about the getWBData package are here. There are four main databases we want to create: 1. cdWB_electro0 West Brook electrofishing data, 3 species (brook trout, brown trout and Atlantic salmon), tagged and untagged fish 2. cdWB_CMR0 West Brook electrofishing data formatted for Capture-Mark-Recapture analysis for tagged individuals 3. cdWB_wanding0 West Brook wanding (portable antenna) data, all tagged salmonids 4. cdWB_antenna0 West Brook stationary antenna data, all tagged salmonids The 0 at the end of these file names indicates that they are the initial files that will be wrangled in the next step (next chapter). cd stands for core data. getNew_cdWB_electro0 &lt;- FALSE getNew_cdWB_CMR0 &lt;- FALSE getNew_cdWB_wanding0 &lt;- FALSE getNew_cdWB_antenna0 &lt;- FALSE West Brook electrofishing data, all salmonids (tagged and untagged) # default values for createCoreData() # function (sampleType = &quot;electrofishing&quot;, baseColumns = T, # columnsToAdd = NULL, includeUntagged = F, whichDrainage = &quot;west&quot;) if(getNew_cdWB_electro0) { cdWB_electro0 &lt;- createCoreData( sampleType = &quot;electrofishing&quot;, #&quot;stationaryAntenna&quot;,&quot;portableAntenna&quot; columnsToAdd = c(&quot;sampleNumber&quot;, &quot;river&quot;, &quot;survey&quot;, &quot;pass&quot;, &quot;observedLength&quot;, &quot;observedWeight&quot;, &quot;comments&quot;), includeUntagged = TRUE, whichDrainage = &quot;west&quot; ) %&gt;% addTagProperties( columnsToAdd = c(&quot;cohort&quot;, &quot;species&quot;, &quot;dateEmigrated&quot;, &quot;sex&quot;, &quot;species&quot; ) ) %&gt;% dplyr::filter(species %in% c( &quot;bkt&quot;,&quot;bnt&quot;,&quot;ats&quot;), area %in% c(&quot;trib&quot;,&quot;inside&quot;,&quot;below&quot;,&quot;above&quot;), !is.na(sampleNumber)) %&gt;% addSampleProperties() %&gt;% addEnvironmental() save(cdWB_electro0, file = &#39;./data/cdWB_electro0.RData&#39;) } else { load(file = &#39;./data/cdWB_electro0.RData&#39;) } str(cdWB_electro0) ## tibble [91,103 x 22] (S3: tbl_df/tbl/data.frame) ## $ tag : chr [1:91103] &quot;00088cbed0&quot; &quot;00088cbed3&quot; &quot;00088cbed4&quot; &quot;00088cbed4&quot; ... ## $ detectionDate : POSIXct[1:91103], format: &quot;2013-03-25 00:00:00&quot; &quot;2012-06-07 09:03:00&quot; &quot;2013-03-29 10:08:00&quot; ... ## $ sampleName : chr [1:91103] &quot;84&quot; &quot;81&quot; &quot;84&quot; &quot;85&quot; ... ## $ sampleNumber : num [1:91103] 73 70 73 74 70 71 73 79 80 71 ... ## $ river : chr [1:91103] &quot;wb obear&quot; &quot;west brook&quot; &quot;west brook&quot; &quot;west brook&quot; ... ## $ section : chr [1:91103] &quot;7&quot; &quot;1&quot; &quot;40&quot; &quot;44&quot; ... ## $ area : chr [1:91103] &quot;trib&quot; &quot;inside&quot; &quot;inside&quot; &quot;inside&quot; ... ## $ observedLength : num [1:91103] 62 62 109 154 113 120 147 70 74 86 ... ## $ survey : chr [1:91103] &quot;shock&quot; &quot;shock&quot; &quot;shock&quot; &quot;shock&quot; ... ## $ pass : num [1:91103] 1 1 1 1 1 1 1 1 1 1 ... ## $ observedWeight : num [1:91103] 1.9 2.7 12.6 41.3 15.5 18.3 30.4 3.5 4.8 6.7 ... ## $ comments : chr [1:91103] &quot;additional genetic sample&quot; NA NA NA ... ## $ cohort : num [1:91103] 2012 2012 2012 2012 2011 ... ## $ species : chr [1:91103] &quot;bkt&quot; &quot;bkt&quot; &quot;bkt&quot; &quot;bkt&quot; ... ## $ dateEmigrated : Date[1:91103], format: NA NA NA ... ## $ sex : chr [1:91103] NA NA NA NA ... ## $ year : num [1:91103] 2013 2012 2013 2013 2012 ... ## $ season : num [1:91103] 1 2 1 2 2 3 1 3 4 3 ... ## $ proportionSampled: num [1:91103] 1 1 1 1 1 1 1 1 1 1 ... ## $ lagDetectionDate : POSIXct[1:91103], format: NA NA &quot;2013-06-25 14:51:00&quot; ... ## $ meanTemperature : num [1:91103] NaN NaN 10.7 NaN 16.5 ... ## $ meanFlow : num [1:91103] NaN NaN 0.5247 NaN 0.0338 ... West Brook electrofishing data formatted for Capture-Mark-Recapture analysis for tagged individuals if(getNew_cdWB_CMR0) { cdWB_CMR0 &lt;- createCoreData( sampleType = &quot;electrofishing&quot;, #&quot;stationaryAntenna&quot;,&quot;portableAntenna&quot;), whichDrainage = &quot;west&quot;, columnsToAdd = c(&quot;sampleNumber&quot;, &quot;river&quot;, &quot;riverMeter&quot;, &quot;survey&quot;, &quot;pass&quot;, &#39;observedLength&#39;, &#39;observedWeight&#39;) ) %&gt;% addTagProperties( columnsToAdd = c(&quot;cohort&quot;, &quot;species&quot;, &quot;dateEmigrated&quot;, &quot;sex&quot;, &quot;species&quot;) ) %&gt;% dplyr::filter(!is.na(tag), area %in% c(&quot;trib&quot;,&quot;inside&quot;,&quot;below&quot;,&quot;above&quot;), !is.na(sampleNumber) ) %&gt;% createCmrData(maxAgeInSamples = 20, inside = F, censorDead = F, censorEmigrated = T) %&gt;% addSampleProperties() %&gt;% addEnvironmental() %&gt;% addKnownZ() %&gt;% fillSizeLocation(size = F) #assumes fish stay in same location until observed elsewhere save(cdWB_CMR0, file = &#39;./data/cdWB_CMR0.RData&#39;) } else { load(file = &#39;./data/cdWB_CMR0.RData&#39;) } str(cdWB_CMR0) ## tibble [483,605 x 26] (S3: tbl_df/tbl/data.frame) ## $ tag : chr [1:483605] &quot;00088cc21e&quot; &quot;00088cc21e&quot; &quot;00088cc21e&quot; &quot;00088cc21e&quot; ... ## $ cohort : num [1:483605] 2012 2012 2012 2012 2012 ... ## $ detectionDate : POSIXct[1:483605], format: &quot;2012-06-05 00:00:00&quot; &quot;2012-09-17 00:00:00&quot; &quot;2012-12-12 00:00:00&quot; ... ## $ sampleName : chr [1:483605] &quot;81&quot; &quot;82&quot; &quot;83&quot; &quot;84&quot; ... ## $ sampleNumber : num [1:483605] 70 71 72 73 74 75 76 77 78 79 ... ## $ river : chr [1:483605] &quot;wb jimmy&quot; &quot;wb jimmy&quot; &quot;wb jimmy&quot; &quot;wb jimmy&quot; ... ## $ section : chr [1:483605] &quot;13&quot; &quot;14&quot; &quot;14&quot; &quot;14&quot; ... ## $ area : chr [1:483605] &quot;trib&quot; &quot;trib&quot; &quot;trib&quot; &quot;trib&quot; ... ## $ observedLength : num [1:483605] 61 67 NA NA NA NA NA NA NA NA ... ## $ survey : chr [1:483605] &quot;shock&quot; &quot;shock&quot; NA NA ... ## $ pass : num [1:483605] 1 1 NA NA NA NA NA NA NA NA ... ## $ observedWeight : num [1:483605] 2.7 3.1 NA NA NA NA NA NA NA NA ... ## $ species : chr [1:483605] &quot;bkt&quot; &quot;bkt&quot; &quot;bkt&quot; &quot;bkt&quot; ... ## $ dateEmigrated : Date[1:483605], format: NA NA NA ... ## $ sex : chr [1:483605] NA NA NA NA ... ## $ enc : num [1:483605] 1 1 0 0 0 0 0 0 0 0 ... ## $ ageInSamples : num [1:483605] 0 1 2 3 4 5 6 7 8 9 ... ## $ sampleIndex : num [1:483605] 60 61 62 63 64 65 66 67 68 69 ... ## $ tagIndex : num [1:483605] 385 385 385 385 385 385 385 385 385 385 ... ## $ year : num [1:483605] 2012 2012 2012 2013 2013 ... ## $ season : num [1:483605] 2 3 4 1 2 3 4 1 2 3 ... ## $ proportionSampled: num [1:483605] 1 1 NA NA NA NA NA NA NA NA ... ## $ lagDetectionDate : POSIXct[1:483605], format: &quot;2012-09-17 00:00:00&quot; &quot;2012-12-12 00:00:00&quot; &quot;2013-03-25 00:00:00&quot; ... ## $ meanTemperature : num [1:483605] 16.48 7.98 1.25 9.13 16.51 ... ## $ meanFlow : num [1:483605] 0.0315 0.135 0.3647 0.3887 0.3033 ... ## $ knownZ : num [1:483605] 1 1 2 2 2 2 2 2 2 2 ... West Brook wanding data, all salmonids (tagged) if(getNew_cdWB_wanding0) { # from wandingDataWB project in d:/ben/github/wandingData/ cdWB_wanding0 &lt;- createCoreData( sampleType = &quot;portableAntenna&quot;, columnsToAdd = c(&quot;tag&quot;, &quot;detectionDate&quot;, &quot;river&quot;, &quot;area&quot;, &quot;section&quot;, &quot;survey&quot;, &quot;sampleName&quot;, &quot;readerId&quot;, &quot;aliveOrDead&quot;, &quot;instance&quot;, &quot;pass&quot;, &quot;quarter&quot;, &quot;leftOrRight&quot;, &quot;habitat&quot;, &quot;cover&quot;, &quot;justification&quot;, &quot;comment&quot;) ) %&gt;% addTagProperties() %&gt;% dplyr::filter( species %in% c( &quot;bkt&quot;,&quot;bnt&quot;,&quot;ats&quot; ) ) save(cdWB_wanding0, file = &#39;./data/cdWB_wanding0.RData&#39;) } else { load(file = &#39;./data/cdWB_wanding0.RData&#39;) } str(cdWB_wanding0) ## tibble [14,880 x 19] (S3: tbl_df/tbl/data.frame) ## $ tag : chr [1:14880] &quot;00088cf41b&quot; &quot;00088cf41b&quot; &quot;00088cf41b&quot; &quot;00088cf435&quot; ... ## $ detectionDate: POSIXct[1:14880], format: &quot;2010-09-27 11:08:45&quot; &quot;2010-10-18 14:16:22&quot; &quot;2010-10-25 11:40:24&quot; ... ## $ sampleName : chr [1:14880] &quot;92710.00&quot; &quot;101810.00&quot; &quot;102510.00&quot; &quot;12610.00&quot; ... ## $ river : chr [1:14880] &quot;wb jimmy&quot; &quot;wb jimmy&quot; &quot;wb jimmy&quot; &quot;wb jimmy&quot; ... ## $ section : chr [1:14880] &quot;13&quot; &quot;14&quot; &quot;14&quot; &quot;2&quot; ... ## $ area : chr [1:14880] &quot;trib&quot; &quot;trib&quot; &quot;trib&quot; &quot;trib&quot; ... ## $ survey : chr [1:14880] &quot;portableAntenna&quot; &quot;portableAntenna&quot; &quot;portableAntenna&quot; &quot;portableAntenna&quot; ... ## $ readerId : chr [1:14880] &quot;iso&quot; &quot;iso&quot; &quot;iso&quot; &quot;iso&quot; ... ## $ aliveOrDead : chr [1:14880] &quot;alive&quot; &quot;alive&quot; NA &quot;alive&quot; ... ## $ instance : num [1:14880] 1 2 3 1 1 1 2 1 1 1 ... ## $ pass : num [1:14880] NA NA NA NA NA NA NA NA NA NA ... ## $ quarter : num [1:14880] 2 1 NA 4 2 4 4 3 4 2 ... ## $ leftOrRight : chr [1:14880] &quot;l&quot; &quot;m&quot; NA &quot;r&quot; ... ## $ habitat : chr [1:14880] &quot;pool&quot; &quot;run&quot; NA &quot;pool&quot; ... ## $ cover : chr [1:14880] NA NA NA NA ... ## $ justification: chr [1:14880] NA NA NA NA ... ## $ comment : chr [1:14880] NA NA NA NA ... ## $ species : chr [1:14880] &quot;bkt&quot; &quot;bkt&quot; &quot;bkt&quot; &quot;bkt&quot; ... ## $ cohort : num [1:14880] 2010 2010 2010 2010 2009 ... West Brook antenna data, all tagged salmonids Note: some pitAntenna code at https://github.com/bletcher/pitAntenna/blob/master/WB/getAndPrepareDataWB.R if(getNew_cdWB_antenna0) { cdWB_antenna0 &lt;- createCoreData( sampleType=c(&quot;stationaryAntenna&quot;), whichDrainage = &quot;west&quot;, columnsToAdd=c( &quot;river&quot;, &quot;riverMeter&quot;, &quot;survey&quot;, &quot;readerID&quot;, &quot;comment&quot; ) ) %&gt;% filter(!is.na(tag)) %&gt;% # for now addTagProperties(columnsToAdd = c( &quot;cohort&quot;, &quot;species&quot;, &quot;dateEmigrated&quot;, &quot;sex&quot;, &quot;species&quot;) ) save(cdWB_antenna0, file = &#39;./data/cdWB_antenna0.RData&#39;) } else { load(file = &#39;./data/cdWB_antenna0.RData&#39;) } str(cdWB_antenna0) ## tibble [410,915 x 10] (S3: tbl_df/tbl/data.frame) ## $ tag : chr [1:410915] &quot;00088cbed9&quot; &quot;00088cbed9&quot; &quot;00088cbed9&quot; &quot;00088cbed9&quot; ... ## $ detectionDate: POSIXct[1:410915], format: &quot;2014-10-17 20:22:33&quot; &quot;2014-10-24 15:34:31&quot; &quot;2014-10-24 16:03:51&quot; ... ## $ river : chr [1:410915] &quot;wb mitchell&quot; &quot;wb mitchell&quot; &quot;wb mitchell&quot; &quot;wb mitchell&quot; ... ## $ riverMeter : num [1:410915] 4797 4797 4830 4830 5524 ... ## $ survey : chr [1:410915] &quot;stationaryAntenna&quot; &quot;stationaryAntenna&quot; &quot;stationaryAntenna&quot; &quot;stationaryAntenna&quot; ... ## $ comment : chr [1:410915] NA NA NA NA ... ## $ cohort : num [1:410915] 2013 2013 2013 2013 2013 ... ## $ species : chr [1:410915] &quot;bkt&quot; &quot;bkt&quot; &quot;bkt&quot; &quot;bkt&quot; ... ## $ dateEmigrated: Date[1:410915], format: &quot;2014-10-25&quot; &quot;2014-10-25&quot; &quot;2014-10-25&quot; ... ## $ sex : chr [1:410915] NA NA NA NA ... "],["wrangle.html", "Chapter 3 Wrangle the data", " Chapter 3 Wrangle the data This section takes cdWB_electro0 and cleans it to create cdWB. Will add additional cleaning steps for cdWB_electro0 and for the other data frames. library(tidyverse) # devtools::install_github(&#39;bletcher/getPrepareWBData&#39;) library(getPrepareWBData) # this has functions for preparing West Brook data reclean_cdWB_electro &lt;- FALSE if(reclean_cdWB_electro){ drainage &lt;- &#39;west&#39; # functions in getPrepareWBData library cdWB_electro &lt;- cdWB_electro0 %&gt;% cleanData(drainage) %&gt;% mergeSites(drainage) %&gt;% addNPasses(drainage) %&gt;% mutate(drainage = drainage) save(cdWB_electro, file = &#39;./data/cdWB_electro.RData&#39;) } else { load(file = &#39;./data/cdWB_electro.RData&#39;) } "],["yoyGrowthModel.html", "Chapter 4 Young-of-year Growth Model 4.1 Raw data 4.2 Yearly means", " Chapter 4 Young-of-year Growth Model The question here is what is driving body size variation across years in brook trout and brown trout in the WB? We focus on ageInSamples == 1 (age-0 fish in the fall sample) fish for growth model. This is the first sampling occasion that most fish are big enough to tag. Not all fish are big enough, however, and there is a number of untagged fish each year. We need to include both tagged and untagged fish in our age-0 size model. Factors to include in the model are 1. Sample date 2. Cumulative temperature prior to sampling 3. Cumulative flow prior to sampling 4. Extreme flow events? 5. Fish density, maybe total and age-0 across all three salmonids 4.1 Raw data test 4.1.1 Brook Trout, West brook cd1 &lt;- cdWB_electro %&gt;% filter(ageInSamples == 1, species != &#39;ats&#39;) plotSppRiv = function(s, r) { ggplot(cd1 %&gt;% filter(species == s, riverOrdered == r), aes(observedLength, color = is.na(tag))) + geom_freqpoly() + geom_vline(xintercept = 60) + ggtitle(paste(s, r, sep = &#39;, &#39;)) + xlim(c(30,125)) + facet_wrap(~ year, scales = &quot;free_y&quot;) } species = &#39;bkt&#39; riverOrdered = &quot;west brook&quot; plotSppRiv(species, riverOrdered) 4.1.2 Brook Trout, wb jimmy 4.1.3 Brook Trout, wb mitchell 4.1.4 Brook Trout, wb obear 4.1.5 Brown Trout, West brook 4.1.6 Brown Trout, wb jimmy 4.1.7 Brown Trout, wb mitchell 4.1.8 Brown Trout, wb obear - there are no Brown trout in OBear 4.1.9 Trout, in the WB mainstem only cdWB1 &lt;- cdWB_electro %&gt;% filter(ageInSamples == 1, species != &#39;ats&#39;, riverOrdered == &quot;west brook&quot;) ggplot(cdWB1, aes(observedLength)) + geom_freqpoly() + geom_vline(xintercept = 60, color = &#39;orange&#39;) + facet_grid(species ~ year) ggplot(cdWB1, aes(observedLength, color = is.na(tag))) + geom_freqpoly() + geom_vline(xintercept = 60) + facet_grid(species ~ year) 4.1.10 Why are there untagged fish bigger than 60mm? Check 2002/bkt/WB, as an example cdWB12002BKT &lt;- cdWB1 %&gt;% filter(year == 2002, species == &quot;bkt&quot;) table(is.na(cdWB12002BKT$tag)) ## ## FALSE TRUE ## 213 132 ggplot(cdWB12002BKT, aes(observedLength, color = is.na(tag))) + geom_freqpoly() + geom_vline(xintercept = 60) cdWB12002BKT %&gt;% filter(observedLength &gt; 60, is.na(tag)) %&gt;% data.frame() ## tag detectionDate sampleName sampleNumber river section area observedLength survey ## 1 &lt;NA&gt; 2002-09-18 41 31 west brook 8 inside 68 shock ## 2 &lt;NA&gt; 2002-09-19 41 31 west brook 13 inside 62 shock ## 3 &lt;NA&gt; 2002-09-23 41 31 west brook 15 inside 61 shock ## 4 &lt;NA&gt; 2002-09-23 41 31 west brook 16 inside 64 shock ## 5 &lt;NA&gt; 2002-09-23 41 31 west brook 17 inside 68 shock ## 6 &lt;NA&gt; 2002-09-24 41 31 west brook 23 inside 68 shock ## 7 &lt;NA&gt; 2002-09-30 41 31 west brook 31 inside 62 shock ## 8 &lt;NA&gt; 2002-09-30 41 31 west brook 32 inside 61 shock ## 9 &lt;NA&gt; 2002-10-01 41 31 west brook 35 inside 69 shock ## 10 &lt;NA&gt; 2002-10-04 41 31 west brook 80 below 74 shock ## 11 &lt;NA&gt; 2002-10-04 41 31 west brook 80 below 71 shock ## 12 &lt;NA&gt; 2002-10-04 41 31 west brook 0 below 69 shock ## 13 &lt;NA&gt; 2002-10-04 41 31 west brook 60 above 70 shock ## 14 &lt;NA&gt; 2002-10-04 41 31 west brook 60 above 68 shock ## 15 &lt;NA&gt; 2002-10-04 41 31 west brook 100 below 71 shock ## 16 &lt;NA&gt; 2002-10-04 41 31 west brook 60 below 71 shock ## 17 &lt;NA&gt; 2002-10-04 41 31 west brook 60 below 71 shock ## 18 &lt;NA&gt; 2002-10-04 41 31 west brook 40 below 77 shock ## 19 &lt;NA&gt; 2002-10-04 41 31 west brook 40 below 78 shock ## 20 &lt;NA&gt; 2002-10-04 41 31 west brook 40 below 71 shock ## 21 &lt;NA&gt; 2002-10-04 41 31 west brook 20 below 70 shock ## 22 &lt;NA&gt; 2002-10-04 41 31 west brook 20 below 68 shock ## pass observedWeight comments cohort species dateEmigrated sex year season ## 1 1 3.5 shock scars/mort 2002 bkt &lt;NA&gt; &lt;NA&gt; 2002 3 ## 2 1 2.8 shock scars/mort 2002 bkt &lt;NA&gt; &lt;NA&gt; 2002 3 ## 3 1 2.4 tagging mort 2002 bkt &lt;NA&gt; &lt;NA&gt; 2002 3 ## 4 1 2.6 slow 2002 bkt &lt;NA&gt; &lt;NA&gt; 2002 3 ## 5 1 3.1 shock scars/mort 2002 bkt &lt;NA&gt; &lt;NA&gt; 2002 3 ## 6 1 3.2 shock scars/mort 2002 bkt &lt;NA&gt; &lt;NA&gt; 2002 3 ## 7 2 2.4 shock scars/mort 2002 bkt &lt;NA&gt; &lt;NA&gt; 2002 3 ## 8 2 2.5 shock scars/mort 2002 bkt &lt;NA&gt; &lt;NA&gt; 2002 3 ## 9 1 3.4 &lt;NA&gt; 2002 bkt &lt;NA&gt; &lt;NA&gt; 2002 3 ## 10 1 4.2 &lt;NA&gt; 2002 bkt &lt;NA&gt; &lt;NA&gt; 2002 3 ## 11 1 4.0 &lt;NA&gt; 2002 bkt &lt;NA&gt; &lt;NA&gt; 2002 3 ## 12 1 3.4 &lt;NA&gt; 2002 bkt &lt;NA&gt; &lt;NA&gt; 2002 3 ## 13 1 3.6 &lt;NA&gt; 2002 bkt &lt;NA&gt; &lt;NA&gt; 2002 3 ## 14 1 3.1 &lt;NA&gt; 2002 bkt &lt;NA&gt; &lt;NA&gt; 2002 3 ## 15 1 4.1 &lt;NA&gt; 2002 bkt &lt;NA&gt; &lt;NA&gt; 2002 3 ## 16 1 3.8 &lt;NA&gt; 2002 bkt &lt;NA&gt; &lt;NA&gt; 2002 3 ## 17 1 3.6 &lt;NA&gt; 2002 bkt &lt;NA&gt; &lt;NA&gt; 2002 3 ## 18 1 5.2 &lt;NA&gt; 2002 bkt &lt;NA&gt; &lt;NA&gt; 2002 3 ## 19 1 4.7 &lt;NA&gt; 2002 bkt &lt;NA&gt; &lt;NA&gt; 2002 3 ## 20 1 3.8 &lt;NA&gt; 2002 bkt &lt;NA&gt; &lt;NA&gt; 2002 3 ## 21 1 3.8 &lt;NA&gt; 2002 bkt &lt;NA&gt; &lt;NA&gt; 2002 3 ## 22 1 3.3 &lt;NA&gt; 2002 bkt &lt;NA&gt; &lt;NA&gt; 2002 3 ## proportionSampled lagDetectionDate meanTemperature meanFlow sectionOriginal riverOrdered ## 1 1 2002-09-18 15.00319 -0.04960486 8 west brook ## 2 1 2002-09-19 14.68938 -0.05461786 13 west brook ## 3 1 2002-09-23 16.77944 -0.06006055 15 west brook ## 4 1 2002-09-23 16.77944 -0.06006055 16 west brook ## 5 1 2002-09-23 16.77944 -0.06006055 17 west brook ## 6 1 2002-09-24 14.72569 -0.06281770 23 west brook ## 7 1 2002-09-30 11.86201 -0.03975789 31 west brook ## 8 1 2002-09-30 11.86201 -0.03975789 32 west brook ## 9 1 2002-10-01 13.36111 -0.03438682 35 west brook ## 10 1 2002-10-04 13.41424 -0.03510296 80 west brook ## 11 1 2002-10-04 13.41424 -0.03510296 80 west brook ## 12 1 2002-10-04 13.41424 -0.03510296 0 west brook ## 13 1 2002-10-04 13.41424 -0.03510296 60 west brook ## 14 1 2002-10-04 13.41424 -0.03510296 60 west brook ## 15 1 2002-10-04 13.41424 -0.03510296 100 west brook ## 16 1 2002-10-04 13.41424 -0.03510296 60 west brook ## 17 1 2002-10-04 13.41424 -0.03510296 60 west brook ## 18 1 2002-10-04 13.41424 -0.03510296 40 west brook ## 19 1 2002-10-04 13.41424 -0.03510296 40 west brook ## 20 1 2002-10-04 13.41424 -0.03510296 40 west brook ## 21 1 2002-10-04 13.41424 -0.03510296 20 west brook ## 22 1 2002-10-04 13.41424 -0.03510296 20 west brook ## inside yday ageInSamples isYOY lagSection distMoved lagObservedWeight lagObservedLength ## 1 TRUE 261 1 TRUE NA NA NA NA ## 2 TRUE 262 1 TRUE NA NA NA NA ## 3 TRUE 266 1 TRUE NA NA NA NA ## 4 TRUE 266 1 TRUE NA NA NA NA ## 5 TRUE 266 1 TRUE NA NA NA NA ## 6 TRUE 267 1 TRUE NA NA NA NA ## 7 TRUE 273 1 TRUE NA NA NA NA ## 8 TRUE 273 1 TRUE NA NA NA NA ## 9 TRUE 274 1 TRUE NA NA NA NA ## 10 FALSE 277 1 TRUE NA NA NA NA ## 11 FALSE 277 1 TRUE NA NA NA NA ## 12 FALSE 277 1 TRUE NA NA NA NA ## 13 FALSE 277 1 TRUE NA NA NA NA ## 14 FALSE 277 1 TRUE NA NA NA NA ## 15 FALSE 277 1 TRUE NA NA NA NA ## 16 FALSE 277 1 TRUE NA NA NA NA ## 17 FALSE 277 1 TRUE NA NA NA NA ## 18 TRUE 277 1 TRUE NA NA NA NA ## 19 TRUE 277 1 TRUE NA NA NA NA ## 20 TRUE 277 1 TRUE NA NA NA NA ## 21 TRUE 277 1 TRUE NA NA NA NA ## 22 TRUE 277 1 TRUE NA NA NA NA ## grWeight grLength minSample maxSample minYear moveDir sampleInterval drainage ## 1 NA NA 10 92 1997 0 0 west ## 2 NA NA 10 92 1997 0 0 west ## 3 NA NA 10 92 1997 0 0 west ## 4 NA NA 10 92 1997 0 0 west ## 5 NA NA 10 92 1997 0 0 west ## 6 NA NA 10 92 1997 0 0 west ## 7 NA NA 10 92 1997 0 0 west ## 8 NA NA 10 92 1997 0 0 west ## 9 NA NA 10 92 1997 0 0 west ## 10 NA NA 10 92 1997 0 0 west ## 11 NA NA 10 92 1997 0 0 west ## 12 NA NA 10 92 1997 0 0 west ## 13 NA NA 10 92 1997 0 0 west ## 14 NA NA 10 92 1997 0 0 west ## 15 NA NA 10 92 1997 0 0 west ## 16 NA NA 10 92 1997 0 0 west ## 17 NA NA 10 92 1997 0 0 west ## 18 NA NA 10 92 1997 0 0 west ## 19 NA NA 10 92 1997 0 0 west ## 20 NA NA 10 92 1997 0 0 west ## 21 NA NA 10 92 1997 0 0 west ## 22 NA NA 10 92 1997 0 0 west ## quarter_length river_meter confluence_river_meter riverMeter nPasses ## 1 5.400 4542.85 0 4542.85 2 ## 2 4.850 4647.75 0 4647.75 2 ## 3 6.100 4692.05 0 4692.05 2 ## 4 4.900 4714.05 0 4714.05 2 ## 5 5.100 4734.05 0 4734.05 2 ## 6 5.375 4861.40 0 4861.40 2 ## 7 5.025 5026.00 0 5026.00 2 ## 8 5.000 5046.05 0 5046.05 2 ## 9 5.250 5108.65 0 5108.65 2 ## 10 5.475 4281.50 0 4281.50 2 ## 11 5.475 4281.50 0 4281.50 2 ## 12 6.675 4369.90 0 4369.90 2 ## 13 4.925 5432.70 0 5432.70 2 ## 14 4.925 5432.70 0 5432.70 2 ## 15 4.400 4261.75 0 4261.75 2 ## 16 4.550 4301.55 0 4301.55 2 ## 17 4.550 4301.55 0 4301.55 2 ## 18 5.975 4322.60 0 4322.60 2 ## 19 5.975 4322.60 0 4322.60 2 ## 20 5.975 4322.60 0 4322.60 2 ## 21 5.500 4345.55 0 4345.55 2 ## 22 5.500 4345.55 0 4345.55 2 ## [ reached &#39;max&#39; / getOption(&quot;max.print&quot;) -- omitted 46 rows ] # looks like untagged area=inside fish wee morts, the rest were above or below ggplot(cdWB12002BKT, aes(observedLength, color = is.na(tag))) + geom_freqpoly() + geom_vline(xintercept = 60) + facet_grid(~area) # check 2003 ggplot(cdWB1 %&gt;% filter(year == 2003, species == &quot;bkt&quot;), aes(observedLength, color = is.na(tag))) + geom_freqpoly() + geom_vline(xintercept = 60) + facet_grid(~area) # same story as 2002 4.1.11 Why no untagged fish at all for 2000 and 2001? cdWB12000_2001BKT &lt;- cdWB1 %&gt;% filter(year %in% 2000:2001, species == &quot;bkt&quot;) table(is.na(cdWB12000_2001BKT$tag)) ## ## FALSE ## 343 table(cdWB12000_2001BKT$observedLength) ## ## 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 85 90 ## 18 23 23 26 20 28 19 14 28 23 20 21 9 14 8 11 3 8 4 5 6 5 1 3 2 1 cdWB12000_2001BKT %&gt;% filter(observedLength &lt; 60) ## # A tibble: 64 x 45 ## tag detectionDate sampleName sampleNumber river section area observedLength survey ## &lt;chr&gt; &lt;dttm&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; ## 1 1bf0f~ 2001-09-10 12:00:00 36 27 west~ 25 insi~ 58 shock ## 2 1bf0f~ 2001-09-07 12:00:00 36 27 west~ 20 insi~ 57 shock ## 3 1bf0f~ 2001-09-07 12:00:00 36 27 west~ 19 insi~ 59 shock ## 4 1bf0f~ 2001-09-07 12:00:00 36 27 west~ 20 insi~ 59 shock ## 5 1bf0f~ 2001-09-06 12:00:00 36 27 west~ 17 insi~ 59 shock ## 6 1bf0f~ 2001-09-10 12:00:00 36 27 west~ 25 insi~ 57 shock ## 7 1bf0f~ 2001-09-07 12:00:00 36 27 west~ 22 insi~ 58 shock ## 8 1bf0f~ 2001-09-10 12:00:00 36 27 west~ 30 insi~ 58 shock ## 9 1bf0f~ 2001-09-06 12:00:00 36 27 west~ 18 insi~ 58 shock ## 10 1bf0f~ 2001-09-07 12:00:00 36 27 west~ 22 insi~ 58 shock ## # ... with 54 more rows, and 36 more variables: pass &lt;dbl&gt;, observedWeight &lt;dbl&gt;, ## # comments &lt;chr&gt;, cohort &lt;dbl&gt;, species &lt;chr&gt;, dateEmigrated &lt;date&gt;, sex &lt;chr&gt;, year &lt;dbl&gt;, ## # season &lt;dbl&gt;, proportionSampled &lt;dbl&gt;, lagDetectionDate &lt;dttm&gt;, meanTemperature &lt;dbl&gt;, ## # meanFlow &lt;dbl&gt;, sectionOriginal &lt;chr&gt;, riverOrdered &lt;ord&gt;, inside &lt;lgl&gt;, yday &lt;dbl&gt;, ## # ageInSamples &lt;dbl&gt;, isYOY &lt;lgl&gt;, lagSection &lt;dbl&gt;, distMoved &lt;dbl&gt;, ## # lagObservedWeight &lt;dbl&gt;, lagObservedLength &lt;dbl&gt;, grWeight &lt;dbl&gt;, grLength &lt;dbl&gt;, ## # minSample &lt;dbl&gt;, maxSample &lt;dbl&gt;, minYear &lt;dbl&gt;, moveDir &lt;dbl&gt;, sampleInterval &lt;dbl&gt;, ... ggplot(cdWB12000_2001BKT, aes(observedLength, color = is.na(tag))) + geom_freqpoly() + geom_vline(xintercept = 60) 4.2 Yearly means means &lt;- cdWB1 %&gt;% group_by(species, year) %&gt;% summarize(meanLength = mean(observedLength, na.rm = TRUE), meanYday = mean(yday, na.rm = TRUE)) ggplot(means, aes(year, meanLength, color = species)) + geom_point() + geom_line() ggplot(means, aes(meanYday, meanLength, color = species)) + geom_point() + geom_smooth(method = &quot;lm&quot;) "],["intro.html", "Chapter 5 Introduction", " Chapter 5 Introduction You can label chapter and section titles using {#label} after them, e.g., we can reference Chapter 5. If you do not manually label them, there will be automatic labels anyway, e.g., Chapter 7. test Figures and tables with captions will be placed in figure and table environments, respectively. par(mar = c(4, 4, .1, .1)) plot(pressure, type = &#39;b&#39;, pch = 19) Figure 5.1: Here is a nice figure! Reference a figure by its code chunk label with the fig: prefix, e.g., see Figure 5.1. Similarly, you can reference tables generated from knitr::kable(), e.g., see Table 5.1. knitr::kable( head(iris, 20), caption = &#39;Here is a nice table!&#39;, booktabs = TRUE ) Table 5.1: Here is a nice table! Sepal.Length Sepal.Width Petal.Length Petal.Width Species 5.1 3.5 1.4 0.2 setosa 4.9 3.0 1.4 0.2 setosa 4.7 3.2 1.3 0.2 setosa 4.6 3.1 1.5 0.2 setosa 5.0 3.6 1.4 0.2 setosa 5.4 3.9 1.7 0.4 setosa 4.6 3.4 1.4 0.3 setosa 5.0 3.4 1.5 0.2 setosa 4.4 2.9 1.4 0.2 setosa 4.9 3.1 1.5 0.1 setosa 5.4 3.7 1.5 0.2 setosa 4.8 3.4 1.6 0.2 setosa 4.8 3.0 1.4 0.1 setosa 4.3 3.0 1.1 0.1 setosa 5.8 4.0 1.2 0.2 setosa 5.7 4.4 1.5 0.4 setosa 5.4 3.9 1.3 0.4 setosa 5.1 3.5 1.4 0.3 setosa 5.7 3.8 1.7 0.3 setosa 5.1 3.8 1.5 0.3 setosa You can write citations, too. For example, we are using the bookdown package (Xie 2021) in this sample book, which was built on top of R Markdown and knitr (Xie 2015). References "],["literature.html", "Chapter 6 Literature", " Chapter 6 Literature Here is a review of existing methods. "],["methods.html", "Chapter 7 Methods", " Chapter 7 Methods We describe our methods in this chapter. "],["applications.html", "Chapter 8 Applications 8.1 Example one 8.2 Example two", " Chapter 8 Applications Some significant applications are demonstrated in this chapter. 8.1 Example one 8.2 Example two "],["final-words.html", "Chapter 9 Final Words", " Chapter 9 Final Words We have finished a nice book. "],["references.html", "References", " References "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
