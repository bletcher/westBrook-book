[["index.html", "The West Brook Story Chapter 1 Introduction", " The West Brook Story Ben Letcher 2022-03-11 Chapter 1 Introduction This book describes accessing, cleaning, and analyzing data from the West Brook Study in Whateley MA, USA. Use bookdown::render_book() to render the book (not showing up in the Build tab like the bookdown book (https://bookdown.org/yihui/bookdown/usage.html) says it should. Use bookdown::render_book(\"index.Rmd\", \"bookdown::gitbook\") to force html book. Use clean_book() to clean up temporary files. "],["getData.html", "Chapter 2 Get data from the server", " Chapter 2 Get data from the server The server hosting the data is named osensei and is at UMass (osensei.cns.umass.edu). It can be accessed using functions in the getWBData package. Use devtools::install_github('Conte-Ecology/westBrookData/getWBData') to install. Most of the functions will run reconnect() to connect to the server with your username and password. Run reconnect() from the console to connect if necessary. Use conDplyr to see the list of available tables on the server. Details about the getWBData package are here. There are four main databases we want to create: 1. cdWB_electro0 West Brook electrofishing data, 3 species (brook trout, brown trout and Atlantic salmon), tagged and untagged fish 2. cdWB_CMR0 West Brook electrofishing data formatted for Capture-Mark-Recapture analysis for tagged individuals 3. cdWB_wanding0 West Brook wanding (portable antenna) data, all tagged salmonids 4. cdWB_antenna0 West Brook stationary antenna data, all tagged salmonids The 0 at the end of these file names indicates that they are the initial files that will be wrangled in the next step (next chapter). cd stands for core data. getNew_cdWB_electro0 &lt;- FALSE getNew_cdWB_CMR0 &lt;- FALSE getNew_cdWB_wanding0 &lt;- FALSE getNew_cdWB_antenna0 &lt;- FALSE West Brook electrofishing data, all salmonids (tagged and untagged) # default values for createCoreData() # function (sampleType = &quot;electrofishing&quot;, baseColumns = T, # columnsToAdd = NULL, includeUntagged = F, whichDrainage = &quot;west&quot;) if(getNew_cdWB_electro0) { cdWB_electro0 &lt;- createCoreData( sampleType = &quot;electrofishing&quot;, #&quot;stationaryAntenna&quot;,&quot;portableAntenna&quot; columnsToAdd = c(&quot;sampleNumber&quot;, &quot;river&quot;, &quot;survey&quot;, &quot;pass&quot;, &quot;observedLength&quot;, &quot;observedWeight&quot;, &quot;comments&quot;), includeUntagged = TRUE, whichDrainage = &quot;west&quot; ) %&gt;% addTagProperties( columnsToAdd = c(&quot;cohort&quot;, &quot;species&quot;, &quot;dateEmigrated&quot;, &quot;sex&quot;, &quot;species&quot; ) ) %&gt;% dplyr::filter(species %in% c( &quot;bkt&quot;,&quot;bnt&quot;,&quot;ats&quot;), area %in% c(&quot;trib&quot;,&quot;inside&quot;,&quot;below&quot;,&quot;above&quot;), !is.na(sampleNumber)) %&gt;% addSampleProperties() %&gt;% addEnvironmental() save(cdWB_electro0, file = &#39;./data/cdWB_electro0.RData&#39;) } else { load(file = &#39;./data/cdWB_electro0.RData&#39;) } str(cdWB_electro0) ## tibble [91,103 x 22] (S3: tbl_df/tbl/data.frame) ## $ tag : chr [1:91103] &quot;00088cbed0&quot; &quot;00088cbed3&quot; &quot;00088cbed4&quot; &quot;00088cbed4&quot; ... ## $ detectionDate : POSIXct[1:91103], format: &quot;2013-03-25 00:00:00&quot; &quot;2012-06-07 09:03:00&quot; &quot;2013-03-29 10:08:00&quot; &quot;2013-06-25 14:51:00&quot; ... ## $ sampleName : chr [1:91103] &quot;84&quot; &quot;81&quot; &quot;84&quot; &quot;85&quot; ... ## $ sampleNumber : num [1:91103] 73 70 73 74 70 71 73 79 80 71 ... ## $ river : chr [1:91103] &quot;wb obear&quot; &quot;west brook&quot; &quot;west brook&quot; &quot;west brook&quot; ... ## $ section : chr [1:91103] &quot;7&quot; &quot;1&quot; &quot;40&quot; &quot;44&quot; ... ## $ area : chr [1:91103] &quot;trib&quot; &quot;inside&quot; &quot;inside&quot; &quot;inside&quot; ... ## $ observedLength : num [1:91103] 62 62 109 154 113 120 147 70 74 86 ... ## $ survey : chr [1:91103] &quot;shock&quot; &quot;shock&quot; &quot;shock&quot; &quot;shock&quot; ... ## $ pass : num [1:91103] 1 1 1 1 1 1 1 1 1 1 ... ## $ observedWeight : num [1:91103] 1.9 2.7 12.6 41.3 15.5 18.3 30.4 3.5 4.8 6.7 ... ## $ comments : chr [1:91103] &quot;additional genetic sample&quot; NA NA NA ... ## $ cohort : num [1:91103] 2012 2012 2012 2012 2011 ... ## $ species : chr [1:91103] &quot;bkt&quot; &quot;bkt&quot; &quot;bkt&quot; &quot;bkt&quot; ... ## $ dateEmigrated : Date[1:91103], format: NA NA NA NA ... ## $ sex : chr [1:91103] NA NA NA NA ... ## $ year : num [1:91103] 2013 2012 2013 2013 2012 ... ## $ season : num [1:91103] 1 2 1 2 2 3 1 3 4 3 ... ## $ proportionSampled: num [1:91103] 1 1 1 1 1 1 1 1 1 1 ... ## $ lagDetectionDate : POSIXct[1:91103], format: NA NA &quot;2013-06-25 14:51:00&quot; NA ... ## $ meanTemperature : num [1:91103] NaN NaN 10.7 NaN 16.5 ... ## $ meanFlow : num [1:91103] NaN NaN 0.5247 NaN 0.0338 ... West Brook electrofishing data formatted for Capture-Mark-Recapture analysis for tagged individuals if(getNew_cdWB_CMR0) { cdWB_CMR0 &lt;- createCoreData( sampleType = &quot;electrofishing&quot;, #&quot;stationaryAntenna&quot;,&quot;portableAntenna&quot;), whichDrainage = &quot;west&quot;, columnsToAdd = c(&quot;sampleNumber&quot;, &quot;river&quot;, &quot;riverMeter&quot;, &quot;survey&quot;, &quot;pass&quot;, &#39;observedLength&#39;, &#39;observedWeight&#39;) ) %&gt;% addTagProperties( columnsToAdd = c(&quot;cohort&quot;, &quot;species&quot;, &quot;dateEmigrated&quot;, &quot;sex&quot;, &quot;species&quot;) ) %&gt;% dplyr::filter(!is.na(tag), area %in% c(&quot;trib&quot;,&quot;inside&quot;,&quot;below&quot;,&quot;above&quot;), !is.na(sampleNumber) ) %&gt;% createCmrData(maxAgeInSamples = 20, inside = F, censorDead = F, censorEmigrated = T) %&gt;% addSampleProperties() %&gt;% addEnvironmental() %&gt;% addKnownZ() %&gt;% fillSizeLocation(size = F) #assumes fish stay in same location until observed elsewhere save(cdWB_CMR0, file = &#39;./data/cdWB_CMR0.RData&#39;) } else { load(file = &#39;./data/cdWB_CMR0.RData&#39;) } str(cdWB_CMR0) ## tibble [483,605 x 26] (S3: tbl_df/tbl/data.frame) ## $ tag : chr [1:483605] &quot;00088cc21e&quot; &quot;00088cc21e&quot; &quot;00088cc21e&quot; &quot;00088cc21e&quot; ... ## $ cohort : num [1:483605] 2012 2012 2012 2012 2012 ... ## $ detectionDate : POSIXct[1:483605], format: &quot;2012-06-05 00:00:00&quot; &quot;2012-09-17 00:00:00&quot; &quot;2012-12-12 00:00:00&quot; &quot;2013-03-25 00:00:00&quot; ... ## $ sampleName : chr [1:483605] &quot;81&quot; &quot;82&quot; &quot;83&quot; &quot;84&quot; ... ## $ sampleNumber : num [1:483605] 70 71 72 73 74 75 76 77 78 79 ... ## $ river : chr [1:483605] &quot;wb jimmy&quot; &quot;wb jimmy&quot; &quot;wb jimmy&quot; &quot;wb jimmy&quot; ... ## $ section : chr [1:483605] &quot;13&quot; &quot;14&quot; &quot;14&quot; &quot;14&quot; ... ## $ area : chr [1:483605] &quot;trib&quot; &quot;trib&quot; &quot;trib&quot; &quot;trib&quot; ... ## $ observedLength : num [1:483605] 61 67 NA NA NA NA NA NA NA NA ... ## $ survey : chr [1:483605] &quot;shock&quot; &quot;shock&quot; NA NA ... ## $ pass : num [1:483605] 1 1 NA NA NA NA NA NA NA NA ... ## $ observedWeight : num [1:483605] 2.7 3.1 NA NA NA NA NA NA NA NA ... ## $ species : chr [1:483605] &quot;bkt&quot; &quot;bkt&quot; &quot;bkt&quot; &quot;bkt&quot; ... ## $ dateEmigrated : Date[1:483605], format: NA NA NA NA ... ## $ sex : chr [1:483605] NA NA NA NA ... ## $ enc : num [1:483605] 1 1 0 0 0 0 0 0 0 0 ... ## $ ageInSamples : num [1:483605] 0 1 2 3 4 5 6 7 8 9 ... ## $ sampleIndex : num [1:483605] 60 61 62 63 64 65 66 67 68 69 ... ## $ tagIndex : num [1:483605] 385 385 385 385 385 385 385 385 385 385 ... ## $ year : num [1:483605] 2012 2012 2012 2013 2013 ... ## $ season : num [1:483605] 2 3 4 1 2 3 4 1 2 3 ... ## $ proportionSampled: num [1:483605] 1 1 NA NA NA NA NA NA NA NA ... ## $ lagDetectionDate : POSIXct[1:483605], format: &quot;2012-09-17 00:00:00&quot; &quot;2012-12-12 00:00:00&quot; &quot;2013-03-25 00:00:00&quot; &quot;2013-06-05 00:00:00&quot; ... ## $ meanTemperature : num [1:483605] 16.48 7.98 1.25 9.13 16.51 ... ## $ meanFlow : num [1:483605] 0.0315 0.135 0.3647 0.3887 0.3033 ... ## $ knownZ : num [1:483605] 1 1 2 2 2 2 2 2 2 2 ... West Brook wanding data, all salmonids (tagged) if(getNew_cdWB_wanding0) { # from wandingDataWB project in d:/ben/github/wandingData/ cdWB_wanding0 &lt;- createCoreData( sampleType = &quot;portableAntenna&quot;, columnsToAdd = c(&quot;tag&quot;, &quot;detectionDate&quot;, &quot;river&quot;, &quot;area&quot;, &quot;section&quot;, &quot;survey&quot;, &quot;sampleName&quot;, &quot;readerId&quot;, &quot;aliveOrDead&quot;, &quot;instance&quot;, &quot;pass&quot;, &quot;quarter&quot;, &quot;leftOrRight&quot;, &quot;habitat&quot;, &quot;cover&quot;, &quot;justification&quot;, &quot;comment&quot;) ) %&gt;% addTagProperties() %&gt;% dplyr::filter( species %in% c( &quot;bkt&quot;,&quot;bnt&quot;,&quot;ats&quot; ) ) save(cdWB_wanding0, file = &#39;./data/cdWB_wanding0.RData&#39;) } else { load(file = &#39;./data/cdWB_wanding0.RData&#39;) } str(cdWB_wanding0) ## tibble [14,880 x 19] (S3: tbl_df/tbl/data.frame) ## $ tag : chr [1:14880] &quot;00088cf41b&quot; &quot;00088cf41b&quot; &quot;00088cf41b&quot; &quot;00088cf435&quot; ... ## $ detectionDate: POSIXct[1:14880], format: &quot;2010-09-27 11:08:45&quot; &quot;2010-10-18 14:16:22&quot; &quot;2010-10-25 11:40:24&quot; &quot;2010-12-06 13:32:15&quot; ... ## $ sampleName : chr [1:14880] &quot;92710.00&quot; &quot;101810.00&quot; &quot;102510.00&quot; &quot;12610.00&quot; ... ## $ river : chr [1:14880] &quot;wb jimmy&quot; &quot;wb jimmy&quot; &quot;wb jimmy&quot; &quot;wb jimmy&quot; ... ## $ section : chr [1:14880] &quot;13&quot; &quot;14&quot; &quot;14&quot; &quot;2&quot; ... ## $ area : chr [1:14880] &quot;trib&quot; &quot;trib&quot; &quot;trib&quot; &quot;trib&quot; ... ## $ survey : chr [1:14880] &quot;portableAntenna&quot; &quot;portableAntenna&quot; &quot;portableAntenna&quot; &quot;portableAntenna&quot; ... ## $ readerId : chr [1:14880] &quot;iso&quot; &quot;iso&quot; &quot;iso&quot; &quot;iso&quot; ... ## $ aliveOrDead : chr [1:14880] &quot;alive&quot; &quot;alive&quot; NA &quot;alive&quot; ... ## $ instance : num [1:14880] 1 2 3 1 1 1 2 1 1 1 ... ## $ pass : num [1:14880] NA NA NA NA NA NA NA NA NA NA ... ## $ quarter : num [1:14880] 2 1 NA 4 2 4 4 3 4 2 ... ## $ leftOrRight : chr [1:14880] &quot;l&quot; &quot;m&quot; NA &quot;r&quot; ... ## $ habitat : chr [1:14880] &quot;pool&quot; &quot;run&quot; NA &quot;pool&quot; ... ## $ cover : chr [1:14880] NA NA NA NA ... ## $ justification: chr [1:14880] NA NA NA NA ... ## $ comment : chr [1:14880] NA NA NA NA ... ## $ species : chr [1:14880] &quot;bkt&quot; &quot;bkt&quot; &quot;bkt&quot; &quot;bkt&quot; ... ## $ cohort : num [1:14880] 2010 2010 2010 2010 2009 ... West Brook antenna data, all tagged salmonids Note: some pitAntenna code at https://github.com/bletcher/pitAntenna/blob/master/WB/getAndPrepareDataWB.R if(getNew_cdWB_antenna0) { cdWB_antenna0 &lt;- createCoreData( sampleType=c(&quot;stationaryAntenna&quot;), whichDrainage = &quot;west&quot;, columnsToAdd=c( &quot;river&quot;, &quot;riverMeter&quot;, &quot;survey&quot;, &quot;readerID&quot;, &quot;comment&quot; ) ) %&gt;% filter(!is.na(tag)) %&gt;% # for now addTagProperties(columnsToAdd = c( &quot;cohort&quot;, &quot;species&quot;, &quot;dateEmigrated&quot;, &quot;sex&quot;, &quot;species&quot;) ) save(cdWB_antenna0, file = &#39;./data/cdWB_antenna0.RData&#39;) } else { load(file = &#39;./data/cdWB_antenna0.RData&#39;) } str(cdWB_antenna0) ## tibble [410,915 x 10] (S3: tbl_df/tbl/data.frame) ## $ tag : chr [1:410915] &quot;00088cbed9&quot; &quot;00088cbed9&quot; &quot;00088cbed9&quot; &quot;00088cbed9&quot; ... ## $ detectionDate: POSIXct[1:410915], format: &quot;2014-10-17 20:22:33&quot; &quot;2014-10-24 15:34:31&quot; &quot;2014-10-24 16:03:51&quot; &quot;2014-10-24 17:29:37&quot; ... ## $ river : chr [1:410915] &quot;wb mitchell&quot; &quot;wb mitchell&quot; &quot;wb mitchell&quot; &quot;wb mitchell&quot; ... ## $ riverMeter : num [1:410915] 4797 4797 4830 4830 5524 ... ## $ survey : chr [1:410915] &quot;stationaryAntenna&quot; &quot;stationaryAntenna&quot; &quot;stationaryAntenna&quot; &quot;stationaryAntenna&quot; ... ## $ comment : chr [1:410915] NA NA NA NA ... ## $ cohort : num [1:410915] 2013 2013 2013 2013 2013 ... ## $ species : chr [1:410915] &quot;bkt&quot; &quot;bkt&quot; &quot;bkt&quot; &quot;bkt&quot; ... ## $ dateEmigrated: Date[1:410915], format: &quot;2014-10-25&quot; &quot;2014-10-25&quot; &quot;2014-10-25&quot; &quot;2014-10-25&quot; ... ## $ sex : chr [1:410915] NA NA NA NA ... "],["wrangle.html", "Chapter 3 Wrangle the data", " Chapter 3 Wrangle the data This section takes cdWB_electro0 and cleans it to create cdWB. Will add additional cleaning steps for cdWB_electro0 and for the other data frames. library(tidyverse) # devtools::install_github(&#39;bletcher/getPrepareWBData&#39;) library(getPrepareWBData) # this has functions for preparing West Brook data drainage &lt;- &#39;west&#39; # functions in getPrepareWBData library cdWB_electro &lt;- cdWB_electro0 %&gt;% cleanData(drainage) %&gt;% mergeSites(drainage) %&gt;% addNPasses(drainage) %&gt;% mutate(drainage = drainage) ## Error in postgresqlExecStatement(conn, statement, ...) : ## RS-DBI driver: (q) ## Warning in postgresqlQuickSQL(conn, statement, ...): Could not create execute: ## Warning in max(pass, na.rm = T): no non-missing arguments to max; returning -Inf ## Warning in getSites(drainageIn): NAs introduced by coercion save(cdWB_electro, file = &#39;./data/cdWB_electro.RData&#39;) "],["yoyGrowthModel.html", "Chapter 4 Young-of-year Growth Model 4.1 Why are there untagged fish bigger than 60mm? 4.2 Why no untagged fish at all for 2000 and 2001?", " Chapter 4 Young-of-year Growth Model Focus on ageInSamples == 1 (age-0 fish in the fall sample) fish for yoy growth model ## Raw data cdWB1 &lt;- cdWB_electro %&gt;% filter(ageInSamples == 1, species != &#39;ats&#39;, riverOrdered == &quot;west brook&quot;) cd1 &lt;- cdWB_electro %&gt;% filter(ageInSamples == 1, species != &#39;ats&#39;) ggplot(cdWB1, aes(observedLength)) + geom_freqpoly() + geom_vline(xintercept = 60, color = &#39;orange&#39;) + facet_grid(species ~ year) ggplot(cdWB1, aes(observedLength, color = is.na(tag))) + geom_freqpoly() + geom_vline(xintercept = 60) + facet_grid(species ~ year) ggplot(cd1, aes(observedLength, color = is.na(tag))) + geom_freqpoly() + geom_vline(xintercept = 60) + facet_grid(species + riverOrdered ~ year, scales = &quot;free_y&quot;) 4.1 Why are there untagged fish bigger than 60mm? Check 2002/bkt/WB, as an example cdWB12002BKT &lt;- cdWB1 %&gt;% filter(year == 2002, species == &quot;bkt&quot;) table(is.na(cdWB12002BKT$tag)) ## ## FALSE TRUE ## 213 132 ggplot(cdWB12002BKT, aes(observedLength, color = is.na(tag))) + geom_freqpoly() + geom_vline(xintercept = 60) ## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`. cdWB12002BKT %&gt;% filter(observedLength &gt; 60, is.na(tag)) %&gt;% data.frame() ## tag detectionDate sampleName sampleNumber river section area observedLength survey pass observedWeight ## 1 &lt;NA&gt; 2002-09-18 41 31 west brook 8 inside 68 shock 1 3.5 ## 2 &lt;NA&gt; 2002-09-19 41 31 west brook 13 inside 62 shock 1 2.8 ## 3 &lt;NA&gt; 2002-09-23 41 31 west brook 15 inside 61 shock 1 2.4 ## 4 &lt;NA&gt; 2002-09-23 41 31 west brook 16 inside 64 shock 1 2.6 ## 5 &lt;NA&gt; 2002-09-23 41 31 west brook 17 inside 68 shock 1 3.1 ## 6 &lt;NA&gt; 2002-09-24 41 31 west brook 23 inside 68 shock 1 3.2 ## 7 &lt;NA&gt; 2002-09-30 41 31 west brook 31 inside 62 shock 2 2.4 ## 8 &lt;NA&gt; 2002-09-30 41 31 west brook 32 inside 61 shock 2 2.5 ## 9 &lt;NA&gt; 2002-10-01 41 31 west brook 35 inside 69 shock 1 3.4 ## 10 &lt;NA&gt; 2002-10-04 41 31 west brook 80 below 74 shock 1 4.2 ## 11 &lt;NA&gt; 2002-10-04 41 31 west brook 80 below 71 shock 1 4.0 ## 12 &lt;NA&gt; 2002-10-04 41 31 west brook 0 below 69 shock 1 3.4 ## 13 &lt;NA&gt; 2002-10-04 41 31 west brook 60 above 70 shock 1 3.6 ## 14 &lt;NA&gt; 2002-10-04 41 31 west brook 60 above 68 shock 1 3.1 ## 15 &lt;NA&gt; 2002-10-04 41 31 west brook 100 below 71 shock 1 4.1 ## 16 &lt;NA&gt; 2002-10-04 41 31 west brook 60 below 71 shock 1 3.8 ## 17 &lt;NA&gt; 2002-10-04 41 31 west brook 60 below 71 shock 1 3.6 ## 18 &lt;NA&gt; 2002-10-04 41 31 west brook 40 below 77 shock 1 5.2 ## 19 &lt;NA&gt; 2002-10-04 41 31 west brook 40 below 78 shock 1 4.7 ## 20 &lt;NA&gt; 2002-10-04 41 31 west brook 40 below 71 shock 1 3.8 ## 21 &lt;NA&gt; 2002-10-04 41 31 west brook 20 below 70 shock 1 3.8 ## 22 &lt;NA&gt; 2002-10-04 41 31 west brook 20 below 68 shock 1 3.3 ## comments cohort species dateEmigrated sex year season proportionSampled lagDetectionDate meanTemperature ## 1 shock scars/mort 2002 bkt &lt;NA&gt; &lt;NA&gt; 2002 3 1 2002-09-18 15.00319 ## 2 shock scars/mort 2002 bkt &lt;NA&gt; &lt;NA&gt; 2002 3 1 2002-09-19 14.68938 ## 3 tagging mort 2002 bkt &lt;NA&gt; &lt;NA&gt; 2002 3 1 2002-09-23 16.77944 ## 4 slow 2002 bkt &lt;NA&gt; &lt;NA&gt; 2002 3 1 2002-09-23 16.77944 ## 5 shock scars/mort 2002 bkt &lt;NA&gt; &lt;NA&gt; 2002 3 1 2002-09-23 16.77944 ## 6 shock scars/mort 2002 bkt &lt;NA&gt; &lt;NA&gt; 2002 3 1 2002-09-24 14.72569 ## 7 shock scars/mort 2002 bkt &lt;NA&gt; &lt;NA&gt; 2002 3 1 2002-09-30 11.86201 ## 8 shock scars/mort 2002 bkt &lt;NA&gt; &lt;NA&gt; 2002 3 1 2002-09-30 11.86201 ## 9 &lt;NA&gt; 2002 bkt &lt;NA&gt; &lt;NA&gt; 2002 3 1 2002-10-01 13.36111 ## 10 &lt;NA&gt; 2002 bkt &lt;NA&gt; &lt;NA&gt; 2002 3 1 2002-10-04 13.41424 ## 11 &lt;NA&gt; 2002 bkt &lt;NA&gt; &lt;NA&gt; 2002 3 1 2002-10-04 13.41424 ## 12 &lt;NA&gt; 2002 bkt &lt;NA&gt; &lt;NA&gt; 2002 3 1 2002-10-04 13.41424 ## 13 &lt;NA&gt; 2002 bkt &lt;NA&gt; &lt;NA&gt; 2002 3 1 2002-10-04 13.41424 ## 14 &lt;NA&gt; 2002 bkt &lt;NA&gt; &lt;NA&gt; 2002 3 1 2002-10-04 13.41424 ## 15 &lt;NA&gt; 2002 bkt &lt;NA&gt; &lt;NA&gt; 2002 3 1 2002-10-04 13.41424 ## 16 &lt;NA&gt; 2002 bkt &lt;NA&gt; &lt;NA&gt; 2002 3 1 2002-10-04 13.41424 ## 17 &lt;NA&gt; 2002 bkt &lt;NA&gt; &lt;NA&gt; 2002 3 1 2002-10-04 13.41424 ## 18 &lt;NA&gt; 2002 bkt &lt;NA&gt; &lt;NA&gt; 2002 3 1 2002-10-04 13.41424 ## 19 &lt;NA&gt; 2002 bkt &lt;NA&gt; &lt;NA&gt; 2002 3 1 2002-10-04 13.41424 ## 20 &lt;NA&gt; 2002 bkt &lt;NA&gt; &lt;NA&gt; 2002 3 1 2002-10-04 13.41424 ## 21 &lt;NA&gt; 2002 bkt &lt;NA&gt; &lt;NA&gt; 2002 3 1 2002-10-04 13.41424 ## 22 &lt;NA&gt; 2002 bkt &lt;NA&gt; &lt;NA&gt; 2002 3 1 2002-10-04 13.41424 ## meanFlow sectionOriginal riverOrdered inside yday ageInSamples isYOY lagSection distMoved lagObservedWeight ## 1 -0.04960486 8 west brook TRUE 261 1 TRUE NA NA NA ## 2 -0.05461786 13 west brook TRUE 262 1 TRUE NA NA NA ## 3 -0.06006055 15 west brook TRUE 266 1 TRUE NA NA NA ## 4 -0.06006055 16 west brook TRUE 266 1 TRUE NA NA NA ## 5 -0.06006055 17 west brook TRUE 266 1 TRUE NA NA NA ## 6 -0.06281770 23 west brook TRUE 267 1 TRUE NA NA NA ## 7 -0.03975789 31 west brook TRUE 273 1 TRUE NA NA NA ## 8 -0.03975789 32 west brook TRUE 273 1 TRUE NA NA NA ## 9 -0.03438682 35 west brook TRUE 274 1 TRUE NA NA NA ## 10 -0.03510296 80 west brook FALSE 277 1 TRUE NA NA NA ## 11 -0.03510296 80 west brook FALSE 277 1 TRUE NA NA NA ## 12 -0.03510296 0 west brook FALSE 277 1 TRUE NA NA NA ## 13 -0.03510296 60 west brook FALSE 277 1 TRUE NA NA NA ## 14 -0.03510296 60 west brook FALSE 277 1 TRUE NA NA NA ## 15 -0.03510296 100 west brook FALSE 277 1 TRUE NA NA NA ## 16 -0.03510296 60 west brook FALSE 277 1 TRUE NA NA NA ## 17 -0.03510296 60 west brook FALSE 277 1 TRUE NA NA NA ## 18 -0.03510296 40 west brook TRUE 277 1 TRUE NA NA NA ## 19 -0.03510296 40 west brook TRUE 277 1 TRUE NA NA NA ## 20 -0.03510296 40 west brook TRUE 277 1 TRUE NA NA NA ## 21 -0.03510296 20 west brook TRUE 277 1 TRUE NA NA NA ## 22 -0.03510296 20 west brook TRUE 277 1 TRUE NA NA NA ## lagObservedLength grWeight grLength minSample maxSample minYear moveDir sampleInterval drainage quarter_length river_meter ## 1 NA NA NA 10 92 1997 0 0 west 5.400 4542.85 ## 2 NA NA NA 10 92 1997 0 0 west 4.850 4647.75 ## 3 NA NA NA 10 92 1997 0 0 west 6.100 4692.05 ## 4 NA NA NA 10 92 1997 0 0 west 4.900 4714.05 ## 5 NA NA NA 10 92 1997 0 0 west 5.100 4734.05 ## 6 NA NA NA 10 92 1997 0 0 west 5.375 4861.40 ## 7 NA NA NA 10 92 1997 0 0 west 5.025 5026.00 ## 8 NA NA NA 10 92 1997 0 0 west 5.000 5046.05 ## 9 NA NA NA 10 92 1997 0 0 west 5.250 5108.65 ## 10 NA NA NA 10 92 1997 0 0 west 5.475 4281.50 ## 11 NA NA NA 10 92 1997 0 0 west 5.475 4281.50 ## 12 NA NA NA 10 92 1997 0 0 west 6.675 4369.90 ## 13 NA NA NA 10 92 1997 0 0 west 4.925 5432.70 ## 14 NA NA NA 10 92 1997 0 0 west 4.925 5432.70 ## 15 NA NA NA 10 92 1997 0 0 west 4.400 4261.75 ## 16 NA NA NA 10 92 1997 0 0 west 4.550 4301.55 ## 17 NA NA NA 10 92 1997 0 0 west 4.550 4301.55 ## 18 NA NA NA 10 92 1997 0 0 west 5.975 4322.60 ## 19 NA NA NA 10 92 1997 0 0 west 5.975 4322.60 ## 20 NA NA NA 10 92 1997 0 0 west 5.975 4322.60 ## 21 NA NA NA 10 92 1997 0 0 west 5.500 4345.55 ## 22 NA NA NA 10 92 1997 0 0 west 5.500 4345.55 ## confluence_river_meter riverMeter nPasses ## 1 0 4542.85 2 ## 2 0 4647.75 2 ## 3 0 4692.05 2 ## 4 0 4714.05 2 ## 5 0 4734.05 2 ## 6 0 4861.40 2 ## 7 0 5026.00 2 ## 8 0 5046.05 2 ## 9 0 5108.65 2 ## 10 0 4281.50 2 ## 11 0 4281.50 2 ## 12 0 4369.90 2 ## 13 0 5432.70 2 ## 14 0 5432.70 2 ## 15 0 4261.75 2 ## 16 0 4301.55 2 ## 17 0 4301.55 2 ## 18 0 4322.60 2 ## 19 0 4322.60 2 ## 20 0 4322.60 2 ## 21 0 4345.55 2 ## 22 0 4345.55 2 ## [ reached &#39;max&#39; / getOption(&quot;max.print&quot;) -- omitted 46 rows ] # looks like untagged area=inside fish wee morts, the rest were above or below ggplot(cdWB12002BKT, aes(observedLength, color = is.na(tag))) + geom_freqpoly() + geom_vline(xintercept = 60) + facet_grid(~area) ## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`. # check 2003 ggplot(cdWB1 %&gt;% filter(year == 2003, species == &quot;bkt&quot;), aes(observedLength, color = is.na(tag))) + geom_freqpoly() + geom_vline(xintercept = 60) + facet_grid(~area) ## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`. # same story as 2002 4.2 Why no untagged fish at all for 2000 and 2001? cdWB12000_2001BKT &lt;- cdWB1 %&gt;% filter(year %in% 2000:2001, species == &quot;bkt&quot;) table(is.na(cdWB12000_2001BKT$tag)) ## ## FALSE ## 343 table(cdWB12000_2001BKT$observedLength) ## ## 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 85 90 ## 18 23 23 26 20 28 19 14 28 23 20 21 9 14 8 11 3 8 4 5 6 5 1 3 2 1 cdWB12000_2001BKT %&gt;% filter(observedLength &lt; 60) ## # A tibble: 64 x 45 ## tag detectionDate sampleName sampleNumber river section area observedLength survey pass observedWeight comments ## &lt;chr&gt; &lt;dttm&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; ## 1 1bf0fc3a~ 2001-09-10 12:00:00 36 27 west~ 25 insi~ 58 shock 1 1.9 fish #1~ ## 2 1bf0fc46~ 2001-09-07 12:00:00 36 27 west~ 20 insi~ 57 shock 1 1.9 0 ## 3 1bf0fe50~ 2001-09-07 12:00:00 36 27 west~ 19 insi~ 59 shock 1 2.1 0 ## 4 1bf0fe76~ 2001-09-07 12:00:00 36 27 west~ 20 insi~ 59 shock 1 2.1 0 ## 5 1bf0fe84~ 2001-09-06 12:00:00 36 27 west~ 17 insi~ 59 shock 2 2.2 0 ## 6 1bf0fe84~ 2001-09-10 12:00:00 36 27 west~ 25 insi~ 57 shock 1 1.9 0 ## 7 1bf0fe88~ 2001-09-07 12:00:00 36 27 west~ 22 insi~ 58 shock 1 2 0 ## 8 1bf0fe88~ 2001-09-10 12:00:00 36 27 west~ 30 insi~ 58 shock 1 2.1 0 ## 9 1bf0fe8b~ 2001-09-06 12:00:00 36 27 west~ 18 insi~ 58 shock 2 2 0 ## 10 1bf0fe95~ 2001-09-07 12:00:00 36 27 west~ 22 insi~ 58 shock 1 1.8 0 ## # ... with 54 more rows, and 33 more variables: cohort &lt;dbl&gt;, species &lt;chr&gt;, dateEmigrated &lt;date&gt;, sex &lt;chr&gt;, year &lt;dbl&gt;, ## # season &lt;dbl&gt;, proportionSampled &lt;dbl&gt;, lagDetectionDate &lt;dttm&gt;, meanTemperature &lt;dbl&gt;, meanFlow &lt;dbl&gt;, ## # sectionOriginal &lt;chr&gt;, riverOrdered &lt;ord&gt;, inside &lt;lgl&gt;, yday &lt;dbl&gt;, ageInSamples &lt;dbl&gt;, isYOY &lt;lgl&gt;, lagSection &lt;dbl&gt;, ## # distMoved &lt;dbl&gt;, lagObservedWeight &lt;dbl&gt;, lagObservedLength &lt;dbl&gt;, grWeight &lt;dbl&gt;, grLength &lt;dbl&gt;, minSample &lt;dbl&gt;, ## # maxSample &lt;dbl&gt;, minYear &lt;dbl&gt;, moveDir &lt;dbl&gt;, sampleInterval &lt;dbl&gt;, drainage &lt;chr&gt;, quarter_length &lt;dbl&gt;, ## # river_meter &lt;dbl&gt;, confluence_river_meter &lt;dbl&gt;, riverMeter &lt;dbl&gt;, nPasses &lt;dbl&gt; ggplot(cdWB12000_2001BKT, aes(observedLength, color = is.na(tag))) + geom_freqpoly() + geom_vline(xintercept = 60) ## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`. means &lt;- cdWB1 %&gt;% group_by(species, year) %&gt;% summarize(meanLength = mean(observedLength, na.rm = TRUE), meanYday = mean(yday, na.rm = TRUE)) ggplot(means, aes(year, meanLength, color = species)) + geom_point() + geom_line() ggplot(means, aes(meanYday, meanLength, color = species)) + geom_point() + geom_smooth(method = lm) "],["intro.html", "Chapter 5 Introduction", " Chapter 5 Introduction You can label chapter and section titles using {#label} after them, e.g., we can reference Chapter 5. If you do not manually label them, there will be automatic labels anyway, e.g., Chapter 7. test Figures and tables with captions will be placed in figure and table environments, respectively. par(mar = c(4, 4, .1, .1)) plot(pressure, type = &#39;b&#39;, pch = 19) Figure 5.1: Here is a nice figure! Reference a figure by its code chunk label with the fig: prefix, e.g., see Figure 5.1. Similarly, you can reference tables generated from knitr::kable(), e.g., see Table 5.1. knitr::kable( head(iris, 20), caption = &#39;Here is a nice table!&#39;, booktabs = TRUE ) Table 5.1: Here is a nice table! Sepal.Length Sepal.Width Petal.Length Petal.Width Species 5.1 3.5 1.4 0.2 setosa 4.9 3.0 1.4 0.2 setosa 4.7 3.2 1.3 0.2 setosa 4.6 3.1 1.5 0.2 setosa 5.0 3.6 1.4 0.2 setosa 5.4 3.9 1.7 0.4 setosa 4.6 3.4 1.4 0.3 setosa 5.0 3.4 1.5 0.2 setosa 4.4 2.9 1.4 0.2 setosa 4.9 3.1 1.5 0.1 setosa 5.4 3.7 1.5 0.2 setosa 4.8 3.4 1.6 0.2 setosa 4.8 3.0 1.4 0.1 setosa 4.3 3.0 1.1 0.1 setosa 5.8 4.0 1.2 0.2 setosa 5.7 4.4 1.5 0.4 setosa 5.4 3.9 1.3 0.4 setosa 5.1 3.5 1.4 0.3 setosa 5.7 3.8 1.7 0.3 setosa 5.1 3.8 1.5 0.3 setosa You can write citations, too. For example, we are using the bookdown package (Xie 2021) in this sample book, which was built on top of R Markdown and knitr (Xie 2015). References "],["literature.html", "Chapter 6 Literature", " Chapter 6 Literature Here is a review of existing methods. "],["methods.html", "Chapter 7 Methods", " Chapter 7 Methods We describe our methods in this chapter. "],["applications.html", "Chapter 8 Applications 8.1 Example one 8.2 Example two", " Chapter 8 Applications Some significant applications are demonstrated in this chapter. 8.1 Example one 8.2 Example two "],["final-words.html", "Chapter 9 Final Words", " Chapter 9 Final Words We have finished a nice book. "],["references.html", "References", " References "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
